<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KKKKAAAAMMMYYY</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    text-align:center;
    background: linear-gradient(135deg,#bd4575,#98141fc7);
    overflow:hidden;
}
h1{
    font-size:2em;
    color:white;
    margin-top:15px;
}
#gameArea{
    position:relative;
    height:50vh;
    width:90%;
    max-width:600px;
    margin:20px auto;
    background:#ffecd2;
    overflow:hidden;
    border:2px solid white;
    border-radius:15px;
}
#player{
    position:absolute;
    bottom:10px;
    left:50%;
    transform:translateX(-50%);
    width:12%;
    max-width:80px;
}
.item{
    position:absolute;
    font-size:2em;
    cursor:pointer;
    pointer-events:none;
    transition: transform 0.2s, color 0.2s;
}
.pop{
    transform: scale(1.5);
    color: #ff4d6d;
}
button{
    padding:12px 20px;
    border:none;
    border-radius:10px;
    background:white;
    color:#8a011a;
    font-weight:bold;
    cursor:pointer;
    margin-top:15px;
}
#score{
    font-size:1.5em;
    margin-top:10px;
    transition: transform 0.3s, color 0.3s;
}
.score-animate{
    transform: scale(1.5);
    color: #b340b3;
}
#message{
    margin-top:15px;
    font-size:  25px;;
    color:rgb(124, 126, 201);
    min-height:1.5em;
}
#mobileControls{
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
}
#mobileControls button{
    margin: 0 10px;
    font-size:1.5em;
}
.confetti, .flower{
    position: absolute;
    pointer-events: none;
    font-size:1.5em;
    animation: fall 3s linear forwards;
}
@keyframes fall {
    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100%) rotate(720deg); opacity: 0; }
}
</style>
</head>
<body>

<h1>Attrape !</h1>
<button onclick="startGame()">Commencer le jeu üéÆ</button>

<div id="gameArea">
    <img id="player" src="kamyy.jpeg" alt="T√™te de la bestie">
</div>

<p id="score">Score : 0</p>
<p id="message"></p>

<script>
let player = document.getElementById("player");
let gameArea = document.getElementById("gameArea");
let scoreEl = document.getElementById("score");
let msgEl = document.getElementById("message");
let keys = {left:false, right:false};
let items = [];
let score = 0;
let gameRunning = false;
let spawnCounter = 0;
let maxItems = 50;

const messagesEnv = [
    "üíå Tu es la meilleure üíñ",
    "üíå Every year I'm being more mmore proud of you  üëë",
    "üíå I will be your temporary valentin until you find somemone who deserves youu üòè",
    "üíå LOOOOOOVEEE YOUUUUüíï",
    "üíå I didn't forget your giiifttt ",
    "üíå Keeep going I know this year you will be amazing lie every year"
];

// Contr√¥les clavier
document.addEventListener("keydown",(e)=>{
    if(e.key === "ArrowLeft") keys.left = true;
    if(e.key === "ArrowRight") keys.right = true;
});
document.addEventListener("keyup",(e)=>{
    if(e.key === "ArrowLeft") keys.left = false;
    if(e.key === "ArrowRight") keys.right = false;
});

// Contr√¥les mobiles
function moveLeft(){ keys.left = true; setTimeout(()=>keys.left=false,100); }
function moveRight(){ keys.right = true; setTimeout(()=>keys.right=false,100); }

// Start game
function startGame(){
    score = 0;
    updateScore(0);
    msgEl.innerHTML = "";
    items.forEach(i=>i.el.remove());
    items = [];
    spawnCounter = 0;
    gameRunning = true;
    requestAnimationFrame(gameLoop);
    spawnInterval = setInterval(spawnItem, 800);
}

// Update score
function updateScore(val){
    score = val;
    scoreEl.innerHTML = "Score : " + score;
    scoreEl.classList.add("score-animate");
    setTimeout(()=>scoreEl.classList.remove("score-animate"), 500);
}

// Show messages
function showMessage(msg){
    msgEl.innerHTML = msg;
    setTimeout(()=> msgEl.innerHTML="", 100000);
}

// Spawn item
function spawnItem(){
    if(spawnCounter >= maxItems) return;
    let item = document.createElement("div");
    item.className = "item";
    let rand = Math.random();
    if(rand < 0.5) item.innerHTML = Math.random()<0.5?"‚òï":"üìö"; 
    else if(rand < 0.7) item.innerHTML = "‚úâÔ∏è";
    else item.innerHTML = "‚ù§Ô∏è";
    item.style.left = Math.random()*(gameArea.clientWidth-30) + "px";
    item.style.top = "-30px";
    gameArea.appendChild(item);
    items.push({el:item, dx: (item.innerHTML==="‚ù§Ô∏è"? (Math.random()<0.5?2:-2) : 0)});
    spawnCounter++;
    if(spawnCounter >= maxItems){
        clearInterval(spawnInterval);
        setTimeout(endGame,2000);
    }
}

// Game loop
function gameLoop(){
    if(!gameRunning) return;

    // Player movement
    let left = player.offsetLeft;
    let speed = 6;
    if(keys.left) left -= speed;
    if(keys.right) left += speed;
    left = Math.max(0, Math.min(left, gameArea.clientWidth - player.clientWidth));
    player.style.left = left + "px";

    // Items movement
    items.forEach((itemObj, index)=>{
        let el = itemObj.el;
        let top = el.offsetTop + 4;
        let leftPos = el.offsetLeft + itemObj.dx;

        if(el.innerHTML==="‚ù§Ô∏è" && (leftPos <= 0 || leftPos >= gameArea.clientWidth-30)) itemObj.dx = -itemObj.dx;
        el.style.top = top + "px";
        el.style.left = leftPos + "px";

        // Collision
        let playerRect = player.getBoundingClientRect();
        let itemRect = el.getBoundingClientRect();
        if(!(playerRect.right < itemRect.left || 
             playerRect.left > itemRect.right || 
             playerRect.bottom < itemRect.top || 
             playerRect.top > itemRect.bottom)){
                if(el.innerHTML==="‚òï" || el.innerHTML==="üìö"){
                    updateScore(score+1);
                } else if(el.innerHTML==="‚úâÔ∏è"){
                    let msg = messagesEnv[Math.floor(Math.random()*messagesEnv.length)];
                    showMessage(msg);
                    updateScore(score+2);
                } else if(el.innerHTML==="‚ù§Ô∏è"){
                    updateScore(Math.max(0,score-2));
                    showMessage("üí• Nah Nahhh ther's no LOOveee this yeaarr üòè");
                }
                el.classList.add("pop");
                setTimeout(()=>el.classList.remove("pop"),1000);
                el.remove();
                items.splice(index,1);
        } else if(top > gameArea.clientHeight){
            el.remove();
            items.splice(index,1);
        }
    });

    requestAnimationFrame(gameLoop);
}

// Flowers effect
function launchFlowers(){
    const flowers = ["üå∏","üå∫","üåº"];
    for(let i=0;i<50;i++){
        let flower = document.createElement("div");
        flower.className = "flower";
        flower.innerHTML = flowers[Math.floor(Math.random()*flowers.length)];
        flower.style.left = Math.random()*gameArea.clientWidth + "px";
        flower.style.fontSize = `${15 + Math.random()*20}px`;
        flower.style.animationDuration = `${2 + Math.random()*2}s`;
        gameArea.appendChild(flower);
        setTimeout(()=> flower.remove(), 100000);
    }
}

// End game
function endGame(){
    gameRunning = false;
    if(score >= 7){
        showMessage("üåπüíñ HAPPY VALENTINE ! Sunshine üíñ");
        launchFlowers();
    } else {
        showMessage("üòÇ LOOOSERRRRR üòèüíî");
    }
}
</script>

</body>
</html>
